schemaVersion: 2.2.0
metadata:
  generateName: northwind-traders
attributes:
  controller.devfile.io/storage-type: ephemeral
components:
  - name: tools
    container:
      image: quay.io/devfile/universal-developer-image:ubi8-latest
      env:
        - name: QUARKUS_HTTP_HOST
          value: 0.0.0.0
      endpoints:
        - exposure: none
          name: debug
          protocol: tcp
          targetPort: 5005
        - exposure: none
          name: test
          protocol: http
          targetPort: 8081
        - exposure: public
          name: inventory
          protocol: http
          targetPort: 8080
          path: /
      memoryRequest: 500Mi
      memoryLimit: 6G
      cpuRequest: 1000m
      cpuLimit: 4000m
      mountSources: true
  - name: m2
    volume:
      size: 1G
commands:
  - id: deploy
    exec:
      component: tools
      commandLine: 'source /home/user/.bashrc && ./deploy-to-openshift.sh'
      workingDir: ${PROJECT_SOURCE}
